fix an error that caused multiprocessing semaphores to leak on OSX